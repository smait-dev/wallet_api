# REST API сервер для кошельков и транзакций

## Роуты

### 1. Отправка средств между кошельками

**POST** `/api/send`

Выполняет перевод средств с одного кошелька на другой.

**Параметры (JSON):**
- `from` (string) — адрес отправителя
- `to` (string) — адрес получателя
- `amount` (float) — сумма перевода

**Возвращаемые коды ошибок и сообщения:**
- 400 Bad Request:
  - "отправка себе запрещена"
  - "неверный адрес отправителя"
  - "неверный адрес получателя"
  - "указана некорректная сумма"
  - "недостаточно средств"
  - "неверные данные запроса"
- 404 Not Found:
  - "кошелек не найден"
- 500 Internal Server Error:
  - "ошибка базы данных"
  - "ошибка списания средств"
  - "ошибка зачисления средств"
  - "ошибка выполнения транзакции"

---

### 2. Получение последних транзакций

**GET** `/api/transactions?count=N`

Возвращает последние N транзакций между кошельками (в конфиге указан лимит на максимальное N).

**Параметры**
- `count` (int) — количество последних транзакций.

Пример ответа:
```json
[
  {
    "from": "e240d825d255af751f5f55af8d9671beabdf2236c0a3b4c88e",
    "to": "f341e926e366af862g6g66bg9e0782cfbce0e3247d1b4cd99f",
    "amount": 10.4
  },
  {
    "from": "df341e926e366af862g6g66bg9e0782cfbce0e3247d1b4cd99fce",
    "to": "e240d825d255af751f5f55af8d9671beabdf2236c0a3b4c88e",
    "amount": 22
  },
]
```

**Коды ошибок и сообщения:**
- 400 Bad Request:
  - "неверные данные запроса"
- 500 Internal Server Error:
  - "ошибка базы данных"

---

### 3. Получение баланса кошелька

**GET** `/api/wallet/{address}/balance`

Возвращает текущий баланс кошелька по его адресу.

**Параметры:**
- `address` (string, path) — адрес кошелька

**Ответ:**
```json
{
  "balance": 123.45
}
```

---

### **Все ошибки возвращаются в формате:**
```json
{
  "error": "..."
}
```
Список всех сообщений об ошибках и их коды хранятся в internal/errors/errors.go.

---

### **Тестирование**
Написаны 2 теста для слоя сервисов. Для запуска необходимо выполнить команду
```bash
    go test ./internal/tests/service
```